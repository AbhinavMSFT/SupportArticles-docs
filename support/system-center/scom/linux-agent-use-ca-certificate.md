---
title: Use CA certificates instead of self-signed SCX Certificates
description: Introduces how to use Certificate Authority (CA) certificates instead of self-signed SCOM Linux agent (SCX) certificates generated by System Center Operations Manager (SCOM).
ms.date: 08/09/2023
ms.reviewer: alexkre, blakedrumm, edpaca, stparker, udmudiar
---
# How to use CA certificates instead of self-signed SCX Certificates generated by SCOM

This article introduces how to use Certificate Authority (CA) certificates instead of self-signed SCOM Linux agent (SCX) certificates generated by System Center Operations Manager (SCOM).

## Create a CA certificate template

1. Duplicate the computer certificate template on a CA server in your SCOM environment.
2. On the **General** tab, made the following changes:
    - Change the **Template name** to a name easily distinguished for SCOM Linux certificates.
    - Change the value of the **Validity period** field to whatever your standards are.
3. On the **Request Handling** tab, check the **Allow private key to be exported** option.
4. On the **Extensions** tab, remove **Client Authentication** from the **Application Policies** extension. Make sure that the **Application Policies** extension has only **Server Authentication**.
5. On the **Subject Name** tab, select **Supply in the request**.
6. Publish the certificate template.

## Request a CA certificate

You can request a certificate on a Windows machine. Then, export the certificate file as the PKCS #12 (.PFX) format and make sure all the Subject Name entries are there.

The certificate must have the following entries in the **Subject Name**. Add them in order:

1. CN=\<ServerNameFQDN>
2. CN=\<ServerName>
3. DC=\<domain component>. For example, `contoso`.
4. DC=\<domain component>. For example, `com`.

If you have other domain components, make sure they are in the certificate.

## Use the CA certificate on Linux agent

On a Windows machine, export the certificate with the private key in the PEM format and copy it to a Linux agent:

1. Export the private key by using the following command:

    ```console
    openssl pkcs12 -in <FileName>.pfx -nocerts -out key.pem
    ```

    You will be prompted for the password of the *\<FileName>.pfx* file and a new password for the new key file.

2. Export the certificate itself by using the following command:

    ```console
    openssl pkcs12 -in <FileName>.pfx -clcerts -nokeys -out omi.pem
    ```

3. Remove the password from the private key by using the following command:

    ```console
    openssl rsa -in key.pem -out omikey.pem 
    ```

    This action is needed since the agent wouldn't know the password to the file.

4. Move the certificate file to an appropriate directory by using the following command:

    ```console
    mv omi.pem /etc/opt/omi/ssl/omi.pem
    ```

    It will ask to override. "omi.pem" is a pointer to the actual certificate file so there's no need to specify the host file name.

5. Move the key file to an appropriate directory by using the following command:

    ```console
    mv omikey.pem /etc/opt/omi/ssl/omikey.pem
    ```

    It will also ask to override.

6. Restart the agent to use the new certificate by using the following command:

    ```console
    scxadmin -restart
    ```

7. Run the following command on the Linux agent to make sure that the *omiserver* service is running. If the certificate is invalid, it won't start.

    ```console
    scxadmin -status
    ```

8. You should see the following output if the service is running:

    ```output
    omiagent: x instances running
    ```